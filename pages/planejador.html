<html>
<head>

    <title>Virada Cultural</title>
    <!-- Sets initial viewport load and disables zooming  -->
    <meta name="viewport" content="initial-scale=1, maximum-scale=1">

    <!-- Evitar problemas com caracteres latinos -->
    <meta charset="UTF-8">

    <!-- Makes your prototype chrome-less once bookmarked to your phone's home screen -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">

    <link type="text/css" rel="stylesheet" href="../ratchet-2.0.2/dist/css/ratchet.min.css"/>
    <link type="text/css" rel="stylesheet" href="../font-awesome-4.7.0/css/font-awesome.min.css" />
    <script src="../ratchet-2.0.2/dist/js/ratchet.min.js"></script>

    <script src="../js/notification.js"></script>

    <link rel="stylesheet" href="css/base.css" />

    <link rel="stylesheet" href="css/planejador.css" />
</head>

<body>
<header class="bar bar-nav">
    <h1 class="title">Planejador</h1>
    <button id="menu-trigger" class="menu-trigger"><span class="fa fa-circle"></span></button>
</header>
<div class="content">
    <ul class="planning">
        <li>
            <img src="/virada-cultural/images/anitta.jpg" class="show-pic" />
            <div class="show-desc">
                <label class="show-hour">19:00 - 20:30</label>
                <label>Show da Anitta</label>
                <label>Palco Arouche</label>
            </div>
        </li>
        <li id="add-event" class="add-event-item">
            <a href="#modalAtracao">
                <div class="show-pic">
                    <span class="add-event-btn fa fa-plus-circle"></span>
                </div>
                <div class="show-desc add-event-text">
                    <label class="add-event-desc">Adicionar uma atividade</label>
                </div>
            </a>
        </li>
    </ul>
    <div id="modalAtracao" class="modal">
        <header class="bar bar-nav">
            <a class="icon icon-close pull-right" href="#modalAtracao"></a>
            <h1 class="title">Nova atividade</h1>
        </header>

        <div class="content">
            <ul class="table-view">
                <li class="table-view-cell media" id="evento-1">
                    <a class="navigate-right add-event-link">
                        <img class="media-object pull-left" src="http://placehold.it/42x42">
                        <div class="media-body" data-img="/virada-cultural/images/anitta.jpg">
                            <label class="show-hour">15:00-15:45</label>
                            <label class="show-name">Show da Carreta Furacão</label>
                            <label class="show-place">Local: Morumbi</label>
                            <p class="activity-text">
                                Sucesso no Brasil todo, o grupo vai realizar um
                                show de dança moderno, cheio de acrobacia e gingado.
                            </p>
                        </div>
                    </a>
                </li>
                <li class="table-view-cell media" id="evento-2">
                    <a class="navigate-right add-event-link">
                        <img class="media-object pull-left" src="http://placehold.it/42x42">
                        <div class="media-body" data-img="/virada-cultural/images/anitta.jpg">
                            <label class="show-hour">15:00-15:45</label>
                            <label class="show-name">Show da Carreta Furacão</label>
                            <label class="show-place">Local: Morumbi</label>
                            <p class="activity-text">
                                Sucesso no Brasil todo, o grupo vai realizar um
                                show de dança moderno, cheio de acrobacia e gingado.
                            </p>
                        </div>
                    </a>
                </li>
                <li class="table-view-cell media" id="evento-3">
                    <a class="navigate-right add-event-link">
                        <img class="media-object pull-left" src="http://placehold.it/42x42">
                        <div class="media-body" data-img="/virada-cultural/images/anitta.jpg">
                            <label class="show-hour">Dia todo</label>
                            <label class="show-name">Show da Carreta Furacão</label>
                            <label class="show-place">Local: Morumbi</label>
                            <p class="activity-text">
                                Sucesso no Brasil todo, o grupo vai realizar um
                                show de dança moderno, cheio de acrobacia e gingado.
                            </p>
                        </div>
                    </a>
                </li>
            </ul>
        </div>
    </div>
    <script class="js-custom">
        var list = document.querySelector('.planning');
        var addButton = document.getElementById('add-event');
        var modal = document.getElementById('modalAtracao');

        function createEventItem(name, hour, place, imgSrc) {
            var elementString = `
                <li>
                    <img src="${imgSrc}" class="show-pic" />
                    <div class="show-desc">
                        <label class="show-hour">${hour}</label>
                        <label>${name}</label>
                        <label>${place}</label>
                    </div>
                </li>`;

            var div = document.createElement('div');
            div.innerHTML = elementString;
            return div.firstElementChild;
        }

        function addEvent(id) {
            var container = document.getElementById(id);
            var data = container.querySelector('.media-body');
            var hour = data.querySelector('.show-hour').innerText;
            var name = data.querySelector('.show-name').innerText;
            var place = data.querySelector('.show-place').innerText;
            var imgSrc = data.getAttribute('data-img');

            // Cria o elemento e adiciona no planejamento
            var item = createEventItem(name, hour, place, imgSrc);
            list.insertBefore(item, addButton);

            // Remove o evento da lista de disponíveis
            container.parentNode.removeChild(container);

            modal.classList.remove('active');
        }

        document.querySelectorAll('.add-event-link').forEach(function (e, index) {
            e.addEventListener('touchend', function () {
                addEvent(`evento-${index + 1}`);
            });
        });
    </script>
</div>
</body>
</html>
<script src="../js/os.js"></script>
<script src="../js/menu.js"></script>
